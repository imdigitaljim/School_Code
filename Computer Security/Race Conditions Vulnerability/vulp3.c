#include <stdio.h>
#include <unistd.h>
#include <string.h>
int main()
{
	char * fn = "/tmp/XYZ";
	char buffer[60];
	FILE *fp;
	
	/* get user input */
	scanf("%50s", buffer );
	
	//get current id states
	uid_t ruid, euid;
	ruid = getuid();
	euid = geteuid();

	//set real userid
	seteuid(ruid);
	
	fp = fopen(fn, "a+");
	if(fp != NULL){
	
		fwrite("\n", sizeof(char), 1, fp);
		fwrite(buffer, sizeof(char), strlen(buffer), fp);
		fclose(fp);
	}
	else printf("No permission \n");

	//reset euid
	seteuid(euid);
	return 0;
}	