#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <sys/stat.h>
#define bool int
#define true 1
#define false 0

int main()
{
	char * fn = "/tmp/XYZ";
	char buffer[60];
	FILE *fp;
	
	/* get user input */
	bool isAccessed = false;
	scanf("%50s", buffer) ;
	
	/* inode struct*/
	struct stat precheck, postcheck;
	
	/*check inode before*/
	lstat("/tmp/XYZ", &precheck);
	if(!access(fn, W_OK)){
		if(!access(fn, W_OK)){
			if(!access(fn, W_OK)){
				/*check inode after*/
				lstat("/tmp/XYZ", &postcheck);
				/*compare what i think i opened was opened*/
				if (precheck.st_ino == postcheck.st_ino)
				{
					fp = fopen(fn, "a+");
					fwrite("\n", sizeof(char), 1, fp);
					fwrite(buffer, sizeof(char), strlen(buffer), fp);
					fclose(fp);
					isAccessed = true;	
				}

			}
		}
	}
	if (isAccessed) 
	{
		printf("No permission \n");	
	}
	
	return 0;
}	